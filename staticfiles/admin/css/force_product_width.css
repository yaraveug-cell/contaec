/* =====================================================================
   SOLUCIÓN FORZADA PARA CAMPO PRODUCTO TRIPLICADO
   Usando múltiples selectores para garantizar que funcione
   ===================================================================== */

/* MÉTODO 1: Selector específico por ID */
#invoiceline_set-group table,
#invoiceline_set-group .tabular table,
table[id*="invoiceline"] {
    width: 100% !important;
    table-layout: fixed !important;
}

/* MÉTODO 2: Múltiples selectores para columna producto (60%) */
#invoiceline_set-group table tr > th:first-child,
#invoiceline_set-group table tr > td:first-child,
#invoiceline_set-group .tabular tr > th:first-child,
#invoiceline_set-group .tabular tr > td:first-child,
table[id*="invoiceline"] tr > th:first-child,
table[id*="invoiceline"] tr > td:first-child,
.inline-group .tabular tr > th:first-child,
.inline-group .tabular tr > td:first-child {
    width: 60% !important;
    min-width: 60% !important;
    max-width: 60% !important;
}

/* MÉTODO 3: nth-child para 8 columnas reales de Django Admin */
/* Columna 1: Order/Drag handle - 3% */
#invoiceline_set-group table tr > *:nth-child(1),
#invoiceline_set-group .tabular tr > *:nth-child(1),
table[id*="invoiceline"] tr > *:nth-child(1) {
    width: 3% !important;
    min-width: 3% !important;
    max-width: 3% !important;
    background: rgba(128, 128, 128, 0.1) !important;
}

/* Columna 2: PRODUCTO - 55% (PRINCIPAL) */
#invoiceline_set-group table tr > *:nth-child(2),
#invoiceline_set-group .tabular tr > *:nth-child(2),
table[id*="invoiceline"] tr > *:nth-child(2) {
    width: 55% !important;
    min-width: 55% !important;
    max-width: 55% !important;
    background: rgba(255, 0, 0, 0.2) !important; /* ROJO para identificar */
    border: 2px solid red !important;
}

/* Columna 3: Cantidad - 8% */
#invoiceline_set-group table tr > *:nth-child(3),
#invoiceline_set-group .tabular tr > *:nth-child(3),
table[id*="invoiceline"] tr > *:nth-child(3) {
    width: 8% !important;
    min-width: 8% !important;
    max-width: 8% !important;
    background: rgba(0, 255, 0, 0.1) !important;
}

/* Columna 4: Precio - 12% */
#invoiceline_set-group table tr > *:nth-child(4),
#invoiceline_set-group .tabular tr > *:nth-child(4),
table[id*="invoiceline"] tr > *:nth-child(4) {
    width: 12% !important;
    min-width: 12% !important;
    max-width: 12% !important;
    background: rgba(0, 0, 255, 0.1) !important;
}

/* Columna 5: Descuento - 6% */
#invoiceline_set-group table tr > *:nth-child(5),
#invoiceline_set-group .tabular tr > *:nth-child(5),
table[id*="invoiceline"] tr > *:nth-child(5) {
    width: 6% !important;
    min-width: 6% !important;
    max-width: 6% !important;
    background: rgba(255, 255, 0, 0.1) !important;
}

/* Columna 6: IVA - 6% */
#invoiceline_set-group table tr > *:nth-child(6),
#invoiceline_set-group .tabular tr > *:nth-child(6),
table[id*="invoiceline"] tr > *:nth-child(6) {
    width: 6% !important;
    min-width: 6% !important;
    max-width: 6% !important;
    background: rgba(255, 0, 255, 0.1) !important;
}

/* Columna 7: Total - 8% */
#invoiceline_set-group table tr > *:nth-child(7),
#invoiceline_set-group .tabular tr > *:nth-child(7),
table[id*="invoiceline"] tr > *:nth-child(7) {
    width: 8% !important;
    min-width: 8% !important;
    max-width: 8% !important;
    background: rgba(0, 255, 255, 0.1) !important;
}

/* Columna 8: Delete - 2% */
#invoiceline_set-group table tr > *:nth-child(8),
#invoiceline_set-group .tabular tr > *:nth-child(8),
table[id*="invoiceline"] tr > *:nth-child(8) {
    width: 2% !important;
    min-width: 2% !important;
    max-width: 2% !important;
    background: rgba(128, 128, 128, 0.1) !important;
}

/* MÉTODO 4: Clase y atributos específicos */
*[class*="field-product"],
td.field-product,
th.column-product {
    width: 60% !important;
    min-width: 60% !important;
    max-width: 60% !important;
}

/* MÉTODO 5: Por atributo name para campos */
select[name*="product"],
input[name*="product"] {
    background: rgba(255, 255, 0, 0.2) !important; /* Amarillo para identificar */
}

/* MÉTODO 6: Selectores genéricos de tabla */
.inline-group table {
    width: 100% !important;
    table-layout: fixed !important;
}

/* Asegurar que los inputs usen todo el espacio de la celda */
.inline-group table td select,
.inline-group table td input {
    width: 100% !important;
    box-sizing: border-box !important;
}

/* Headers destacados */
.inline-group table th {
    background: #79aec8 !important;
    color: white !important;
    font-weight: bold !important;
    text-align: center !important;
    padding: 8px 4px !important;
}

/* MÉTODO 7: SELECT DE PRODUCTO - MÁXIMA PRIORIDAD */
/* Forzar que el select de producto use casi todo el contenedor */
body #invoiceline_set-group table tr > td:nth-child(2) select,
body #invoiceline_set-group table tr > td:nth-child(2) .select2-container,
body .inline-group .tabular select[name*="product"],
html body select[name*="product"] {
    width: 95% !important;
    min-width: 95% !important;
    max-width: 95% !important;
    display: block !important;
    box-sizing: border-box !important;
}

/* Select2 específico - máxima prioridad */
body #invoiceline_set-group table tr > td:nth-child(2) .select2-container .select2-selection--single,
body .select2-container .select2-selection--single {
    width: 100% !important;
    min-width: 100% !important;
    display: block !important;
}

/* Reducir padding del contenedor para dar más espacio al select */
body #invoiceline_set-group table tr > td:nth-child(2) {
    padding: 1px 2px !important; /* Padding mínimo */
}

/* Fuerza bruta para anchos de columnas */
body #invoiceline_set-group table tr > *:nth-child(1) { width: 3% !important; }
body #invoiceline_set-group table tr > *:nth-child(2) { 
    width: 55% !important; 
    background: rgba(255, 0, 0, 0.1) !important; /* Rojo para debug */
}
body #invoiceline_set-group table tr > *:nth-child(3) { width: 8% !important; }
body #invoiceline_set-group table tr > *:nth-child(4) { width: 12% !important; }
body #invoiceline_set-group table tr > *:nth-child(5) { width: 6% !important; }
body #invoiceline_set-group table tr > *:nth-child(6) { width: 6% !important; }
body #invoiceline_set-group table tr > *:nth-child(7) { width: 8% !important; }
body #invoiceline_set-group table tr > *:nth-child(8) { width: 2% !important; }